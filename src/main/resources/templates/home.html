<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang ch·ªß</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
</head>
<body class="bg-gray-50">

<!-- Header -->
<div th:replace="~{fragments/header :: header}"></div>

<!-- T·ªïng quan -->
<div class="container mx-auto mt-6">
    <h1 class="text-3xl font-bold mb-4">üìä T·ªïng quan c·ª≠a h√†ng</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- Card -->
        <div class="bg-white shadow rounded-lg p-5 flex items-center space-x-4 border-l-4 border-blue-500">
            <i class="fas fa-box fa-2x text-blue-500"></i>
            <div>
                <p class="text-gray-500">S·∫£n ph·∫©m</p>
                <h3 class="text-2xl font-bold" th:text="${totalProducts}">0</h3>
            </div>
        </div>

        <div class="bg-white shadow rounded-lg p-5 flex items-center space-x-4 border-l-4 border-green-500">
            <i class="fas fa-users fa-2x text-green-500"></i>
            <div>
                <p class="text-gray-500">Kh√°ch h√†ng</p>
                <h3 class="text-2xl font-bold" th:text="${totalCustomers}">0</h3>
            </div>
        </div>

        <div class="bg-white shadow rounded-lg p-5 flex items-center space-x-4 border-l-4 border-yellow-500">
            <i class="fas fa-file-invoice fa-2x text-yellow-500"></i>
            <div>
                <p class="text-gray-500">H√≥a ƒë∆°n</p>
                <h3 class="text-2xl font-bold" th:text="${totalInvoices}">0</h3>
            </div>
        </div>

        <div class="bg-white shadow rounded-lg p-5 flex items-center space-x-4 border-l-4 border-red-500">
            <i class="fas fa-coins fa-2x text-red-500"></i>
            <div>
                <p class="text-gray-500">Doanh thu</p>
                <h3 class="text-2xl font-bold"
                    th:text="${#numbers.formatDecimal(totalRevenue, 0, 'COMMA', 2, 'POINT') + ' ƒë'}">
                    0 ƒë
                </h3>
            </div>
        </div>
    </div>
</div>

<!-- B·∫£ng d·ªØ li·ªáu -->
<div class="container mx-auto mt-10">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Top s·∫£n ph·∫©m -->
        <div class="bg-white shadow rounded-lg p-5">
            <h2 class="text-xl font-semibold mb-4"><i class="fas fa-star text-yellow-400 mr-2"></i>Top 5 s·∫£n ph·∫©m b√°n ch·∫°y</h2>
            <ul class="list-disc pl-6 space-y-2 text-gray-700">
                <li th:each="p : ${topProducts}" th:text="|${p[0]} - ${p[1]} kg|"
                >T√™n s·∫£n ph·∫©m - S·ªë l∆∞·ª£ng</li>
            </ul>
        </div>

        <!-- Top kh√°ch h√†ng -->
        <div class="bg-white shadow rounded-lg p-5">
            <h2 class="text-xl font-semibold mb-4"><i class="fas fa-user-tie text-green-500 mr-2"></i>Top 5 kh√°ch h√†ng chi ti√™u</h2>
            <ul class="list-disc pl-6 space-y-2 text-gray-700">
                <li th:each="c : ${topCustomers}"
                    th:text="|${c[0]} - ${#numbers.formatDecimal(c[1], 0, 'POINT', 0, 'COMMA')} ƒë|">
                    T√™n kh√°ch - S·ªë ti·ªÅn
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- Bi·ªÉu ƒë·ªì -->
<div class="container mx-auto mt-10 bg-white shadow rounded-lg p-6">
    <h2 class="text-xl font-semibold mb-4"><i class="fas fa-chart-bar mr-2 text-blue-600"></i>Doanh thu theo th√°ng</h2>
    <canvas id="revenueBarChart" style="max-height: 300px;"></canvas>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    const revenueData = /*[[${monthlyRevenue}]]*/ [];
    const monthLabels = /*[[${monthLabels}]]*/ [];

    const ctxBar = document.getElementById('revenueBarChart').getContext('2d');
    new Chart(ctxBar, {
        type: 'bar',
        data: {
            labels: monthLabels,
            datasets: [{
                label: 'Doanh thu (VNƒê)',
                data: revenueData,
                backgroundColor: 'rgba(54, 162, 235, 0.6)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1,
                borderRadius: 5
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        callback: function (value) {
                            return value.toLocaleString('vi-VN') + ' ƒë';
                        }
                    }
                }
            }
        }
    });
    /*]]>*/
</script>

<!-- Footer / Scripts -->
<div th:replace="~{fragments/script :: script}"></div>
</body>
</html>
